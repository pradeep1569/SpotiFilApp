(self.webpackChunkSpotifil=self.webpackChunkSpotifil||[]).push([[671],{4997:(E,t,a)=>{"use strict";function _(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.readFile=function(e){return A(e).then(function(r){return r instanceof ArrayBuffer||(r=function(e){for(var r=new ArrayBuffer(2*e.length),u=new Uint16Array(r),i=0,d=e.length;i<d;i++)u[i]=e.charCodeAt(i);return r}(r.toString())),r})},t.readString=function(e){return A(e).then(function(r){return r instanceof ArrayBuffer&&(r=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))}(r)),r})},t.writeFile=function(e,r){return new Promise(function(u,i){l("readwrite",function(d){var p=d.put({path:e,dir:s.default.dirname(e),type:"file",data:r});p.onerror=i,p.onsuccess=function(D){u()}})})},t.removeFile=g,t.readdir=C,t.mkdir=function(e){return new Promise(function(r,u){l("readwrite",function(i){var d=B(s.default),p=i.put({path:e,dir:s.default.dirname(d),type:"directory"});p.onerror=u,p.onsuccess=function(D){r()}})})},t.rmdir=function I(e){return C(e).then(function r(u){if(!u||!u.length)return g(e);var i=u.shift();return("directory"===i.type?I:g)(i.name).then(function(){return r(u)})})};var s=_(a(4047)),v=_(a(4496)),c=window.location.host+"_filesystem",f="files";function l(e,r){!function(e){var r=window.indexedDB.open(c,1);r.onupgradeneeded=function(u){u.target.result.createObjectStore(f,{keyPath:"path"}).createIndex("dir","dir",{unique:!1})},r.onsuccess=function(u){e(u.target.result)}}(function(u){var d=u.transaction([f],e).objectStore(f);r(d)})}var A=function(r){return new Promise(function(u,i){l("readonly",function(d){var p=d.get(r);p.onerror=i,p.onsuccess=function(D){var P=D.target.result;P&&P.data?u(P.data):i("File not found")}})})};function g(e){return new Promise(function(r){l("readwrite",function(u){var i=u.delete(e);i.onerror=i.onsuccess=function(d){r()}})})}function B(e){return"/"===e[e.length-1]?e:e+"/"}function C(e){return new Promise(function(r,u){l("readonly",function(i){var d=s.default.dirname(B(e)),p=i.index("dir"),D=IDBKeyRange.only(d),P=p.openCursor(D);P.onerror=function(F){u(F)};var T=[];P.onsuccess=function(F){var S=F.target.result;if(S){var U=S.value,L=new v.default(U.path,U.type);T.push(L),S.continue()}else r(T)}})})}},4496:(E,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var v,s=(v=a(4047))&&v.__esModule?v:{default:v};t.default=function(v,o){this.path=v,this.name=s.default.basename(v),this.dir=s.default.dirname(v),this.type=o},E.exports=t.default},9388:(E,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,w=a(4997),o=(n=a(4496))&&n.__esModule?n:{default:n};o.default.prototype.readFile=function(n){if("file"!==this.type)throw new TypeError("Not a file.");return(0,w.readFile)(this.path,n)},function(n,c){for(var f=Object.getOwnPropertyNames(c),h=0;h<f.length;h++){var y=f[h],l=Object.getOwnPropertyDescriptor(c,y);l&&l.configurable&&void 0===n[y]&&Object.defineProperty(n,y,l)}}(t,function(n){if(n&&n.__esModule)return n;var c={};if(null!=n)for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(c[f]=n[f]);return c.default=n,c}(w)),t.DirectoryEntry=o.default},4047:(E,t)=>{t.basename=function(a){return a.split("/").pop()},t.dirname=function(a){return a.split("/").slice(0,-1).join("/")||"."},t.extname=function(a){var _=t.basename(a);return~_.indexOf(".")?"."+_.split(".").pop():""}},1671:(E,t,a)=>{"use strict";a.r(t),a.d(t,{LocalReader:()=>w});var _=a(8239),m=a(7328),s=a(9388);class w extends m.E{constructor(o){super(),this._path=o}open(){var o=this;return(0,_.Z)(function*(){return new Promise((n,c)=>{s.stat(o._path,(f,h)=>{f?c(f):(o.size=h.size,s.open(o._path,"r",(y,l)=>{y?c(f):(o._fd=l,n())}))})})})()}close(){var o=this;return(0,_.Z)(function*(){return new Promise((n,c)=>{void 0!==o._fd?s.close(o._fd,f=>{f?c(f):n()}):c(new Error("Resource not yet open"))})})()}read(o,n){var c=this;return(0,_.Z)(function*(){const f=Buffer.alloc(o);return new Promise((h,y)=>{void 0!==c._fd?s.read(c._fd,f,0,o,n,(l,A,O)=>{if(l)return y(l);const M=new ArrayBuffer(O.length),R=new Uint8Array(M);for(let g=0;g<O.length;g++)R[g]=O[g];h(M)}):y(new Error("Resource not yet open"))})})()}}}}]);